@model Oeuvre.Models.Image




@{
    ViewData["Title"] = "Upload";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<h1>Upload Images</h1>


<hr />
<div class="container">
    <form method="post" asp-controller="Upload" asp-action="UploadImageToLocal" enctype="multipart/form-data">
        <div class="row">
            <div class="col-lg-6">
                <label for="imageName">Image Name:</label>
                <br />
                <input class="form-control" id="formInput" type="text" />
            </div>

            <div class="col-md-6">
                <label for="imageArtist">Artist Name:</label>
                <br />
                <input class="form-control" type="text" />
            </div>
        </div>

        <br />

        <div class="row">
            <div class="col-md-6">
                <label for="imageThemes">Theme Type:</label>
                <br />
                <select class="form-control">
                    <option>Colour</option>
                    <option>Mood</option>
                </select>
            </div>

            <div class="col-md-6">
                <label for="imageThemes">Theme:</label>
                <br />
                <input class="form-control" type="text" placeholder="Red" />
            </div>
        </div>

        <br />

        <div class="row">
            <div class="col-xl-12">
                <label for="imageDescription">Description:</label>
                <br />
                <textarea class="form-control" id="formInput"></textarea>
            </div>
        </div>

        <br />

        <div class="row">
            <div class="col-xl-12" style="text-align: center;">
                <label id="previewHeader" style="display: none;" for="imagePreview">Preview:</label>
                <br />
                <img id="imagePreview" style="height: 80%; width: 80%; max-height: 850px;
                                       max-width: 700px; display: none; box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.5);" />
            </div>
        </div>

        <br />

        <div class="row">
            <div class="col-sm-3">
                <label id="imageLabel" for="file">Image:</label>
                <input id="imageUpload" type="file" name="image"
                       accept="image/png, image/jpeg" onchange="previewImage(event)">
            </div>
        </div>

        <br />

        <div class="row">
            <div class="col-sm-3">
                <input type="submit" value="Upload" class="btn btn-primary" />
            </div>
        </div>
    </form>
</div>

<script type="text/javascript">
    /* Script will update the filename on the page upon selecting an image */
    $(document).ready(function () {
        $("#imageUpload").on("change", function () {
            var fileName = $(this).val().split("\\").pop();
            $(this).next("#imageLabel").html(fileName);
        })
    });
</script>

<script>
    /* Script will refresh image src with selected file, then display
       the image and the header */
    var previewImage = function (event) {
        var image = document.getElementById('imagePreview');
        var previewText = document.getElementById('previewHeader');
        previewText.style.display = "initial";
        image.style.display = "initial";
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}

@section Styles {
    <link rel="stylesheet" href="~/css/UploadImage.css" />
}